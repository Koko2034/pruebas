import { Transpiler, TranspileResult, FileLocation, TranspilerOptions } from 'stryker-api/transpile';
import { File } from 'stryker-api/core';
import { StatementMap } from 'stryker-api/test_runner';
import { TestFramework } from 'stryker-api/test_framework';
export interface StatementMapDictionary {
    [file: string]: StatementMap;
}
export default class CoverageInstrumenterTranspiler implements Transpiler {
    private settings;
    private testFramework;
    private instrumenter;
    statementMapsPerFile: StatementMapDictionary;
    private log;
    constructor(settings: TranspilerOptions, testFramework: TestFramework | null);
    transpile(files: File[]): Promise<TranspileResult>;
    getMappedLocation(sourceFileLocation: FileLocation): FileLocation;
    /**
     * Coverage variable *must* have the name '__coverage__'. Only that variable
     * is reported back to the TestRunner process when using one of the karma
     * test framework adapters (karma-jasmine, karma-mocha, ...).
     *
     * However, when coverageAnalysis is 'perTest' we don't choose that variable name right away,
     * because we need that variable to hold all coverage results per test. Instead, we use __strykerCoverageCurrentTest__
     * and after each test copy over the value of that current test to the global coverage object __coverage__
     */
    private readonly coverageVariable;
    private retrieveStatementMap(instrumentedCode);
    private instrumentFileIfNeeded(file);
    private instrumentFile(sourceFile);
    private addCollectCoverageFileIfNeeded(result);
    private coveragePerTestFileContent(testFramework);
    private errorResult(error);
}
